<Window x:Class="QueryClipboard.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Configuracoes"
        Height="540"
        Width="620"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource BgBrush}"
        Topmost="True"
        FontFamily="Segoe UI">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Mini header accent -->
        <Border Grid.Row="0" Height="4">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="{StaticResource AccentColor}" Offset="0"/>
                    <GradientStop Color="{StaticResource AccentDarkColor}" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <Grid Grid.Row="1" Margin="24,20,24,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Modo de Armazenamento -->
            <Border Grid.Row="0"
                    Background="White"
                    CornerRadius="10"
                    Padding="18"
                    Margin="0,0,0,14"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="Modo de Armazenamento"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <RadioButton x:Name="JsonRadioButton"
                                 Content="Arquivo JSON (Local)"
                                 GroupName="StorageMode"
                                 Margin="0,0,0,8"
                                 Checked="StorageMode_Changed"/>
                    <RadioButton x:Name="SqlServerRadioButton"
                                 Content="SQL Server"
                                 GroupName="StorageMode"
                                 Checked="StorageMode_Changed"/>

                    <Border x:Name="ConnectionStringPanel"
                            Visibility="Collapsed"
                            Background="{StaticResource CodeBgBrush}"
                            Padding="12"
                            Margin="0,10,0,0"
                            CornerRadius="8">
                        <StackPanel>
                            <TextBlock Text="Connection String"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       Margin="0,0,0,6"/>
                            <TextBox x:Name="ConnectionStringTextBox"
                                     FontSize="11"
                                     FontFamily="Consolas"
                                     Padding="8"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     Height="55"
                                     VerticalScrollBarVisibility="Auto"
                                     BorderBrush="{StaticResource BorderBrush}"
                                     BorderThickness="1"/>
                            <TextBlock Text="Ex: Server=localhost;Database=QueryClipboard;Trusted_Connection=True;TrustServerCertificate=True;"
                                       FontSize="10"
                                       Foreground="{StaticResource MutedBrush}"
                                       Margin="0,5,0,0"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Atalho de Teclado -->
            <Border Grid.Row="1"
                    Background="White"
                    CornerRadius="10"
                    Padding="18"
                    Margin="0,0,0,14"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="Atalho de Teclado"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0"
                                x:Name="HotkeyDisplay"
                                Background="{StaticResource CodeBgBrush}"
                                CornerRadius="8"
                                Padding="12,8"
                                Margin="0,0,10,0">
                            <TextBlock x:Name="HotkeyTextBlock"
                                       FontSize="14"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       VerticalAlignment="Center"/>
                        </Border>

                        <Button Grid.Column="1"
                                x:Name="ChangeHotkeyButton"
                                Content="Alterar"
                                Click="ChangeHotkeyButton_Click"
                                Style="{StaticResource AccentButtonStyle}"
                                Padding="16,8"/>
                    </Grid>

                    <!-- Painel de captura (oculto inicialmente) -->
                    <Border x:Name="HotkeyCapturePanel"
                            Visibility="Collapsed"
                            Background="{StaticResource CodeBgBrush}"
                            CornerRadius="8"
                            Padding="14"
                            Margin="0,10,0,0">
                        <StackPanel>
                            <TextBlock Text="Pressione a combinacao de teclas desejada:"
                                       FontSize="12"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       Margin="0,0,0,8"/>
                            <TextBox x:Name="HotkeyCaptureTextBox"
                                     IsReadOnly="True"
                                     FontSize="16"
                                     FontWeight="SemiBold"
                                     FontFamily="Segoe UI"
                                     Foreground="{StaticResource AccentBrush}"
                                     Background="White"
                                     BorderBrush="{StaticResource AccentBrush}"
                                     BorderThickness="2"
                                     Padding="10,8"
                                     HorizontalContentAlignment="Center"
                                     PreviewKeyDown="HotkeyCaptureTextBox_PreviewKeyDown"/>
                            <TextBlock Text="Use Ctrl, Alt, Shift ou Win + uma tecla"
                                       FontSize="10"
                                       Foreground="{StaticResource MutedBrush}"
                                       Margin="0,6,0,8"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="Confirmar"
                                        x:Name="ConfirmHotkeyButton"
                                        Click="ConfirmHotkeyButton_Click"
                                        Style="{StaticResource AccentButtonStyle}"
                                        Padding="14,7"
                                        FontSize="12"/>
                                <Button Content="Cancelar"
                                        Click="CancelHotkeyButton_Click"
                                        Style="{StaticResource GhostButtonStyle}"
                                        Padding="14,7"
                                        FontSize="12"
                                        Margin="6,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Categorias -->
            <Border Grid.Row="2"
                    Background="White"
                    CornerRadius="10"
                    Padding="18"
                    Margin="0,0,0,14"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0"
                               Text="Categorias"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,10"/>

                    <ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  Style="{StaticResource SlimScrollViewer}">
                        <StackPanel x:Name="CategoriesPanel"/>
                    </ScrollViewer>

                    <Button Grid.Row="2"
                            Content="+ Adicionar Categoria"
                            Click="AddCategoryButton_Click"
                            Style="{StaticResource GhostButtonStyle}"
                            Margin="0,10,0,0"
                            HorizontalAlignment="Stretch"/>
                </Grid>
            </Border>

            <!-- Botoes -->
            <StackPanel Grid.Row="3"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button Content="Cancelar"
                        Click="CancelButton_Click"
                        Style="{StaticResource GhostButtonStyle}"
                        Width="100"
                        Margin="0,0,10,0"/>
                <Button Content="Salvar"
                        Click="SaveButton_Click"
                        Style="{StaticResource AccentButtonStyle}"
                        Width="100"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
